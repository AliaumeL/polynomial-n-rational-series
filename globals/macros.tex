%% CUSTOM MACROS, META MACROS, AND CONFIG %%


% knowledge management
\knowledgestyle{intro notion}{color={A5}, emphasize}
\knowledgestyle{notion}{color={A4}}
\knowledgeconfigure{anchor point color={A2},
                    anchor point shape=corner}
\knowledgestyle{intro unknown}{color={D3}, emphasize}
\knowledgestyle{intro unknown cont}{color={C3}, emphasize}
\knowledgestyle{kl unknown}{color={D2}}
\knowledgestyle{kl unknown cont}{color={C2}}

\hypersetup{
    colorlinks=true,
    anchorcolor=A2,
    citecolor=A4,
    linkcolor=A4,
    urlcolor=A3,
    filecolor=A3,
    runcolor=D2,
    menucolor=D2,
}

\NewDocumentCommand{\klscope}{ o m }{
    \withkl{\kl[#1]}{#2}
}

% Common theorem styles
\newtheorem{fact}[therm]{Fact}
\theoremstyle{definition}
\newtheorem{example}[therm]{Example}
\theoremstyle{remark}
\newtheorem{exercise}[therm]{Exercise}
\newtheorem{tool}[therm]{Tool}
\newtheorem{conjecture}[therm]{Conjecture}


% Upgreek letters
\makeatletter
\newcommand\mathgr[1]{\tokcycle
  {\addcytoks{##1}}
  {\processtoks{##1}}
  {\ifcsname up\expandafter\@gobble\string##1\endcsname
   \addcytoks[1]{\csname up\expandafter\@gobble\string##1\endcsname}%
    \else\addcytoks{##1}\fi}
  {\addcytoks{##1}}{#1}%
  \expandafter\mathrm\expandafter{\the\cytoks}%
}
\makeatother

% Cite a knowledge
\NewDocumentCommand{\citek}{ o m }{
    \IfNoValueTF{#1}{
        \cite{m}
    }{
        \cite[{\kl(#1)[#2]}]{#1}
    }
}
